<!DOCTYPE html>
<html lang="zh-CN">
<script>
  var _hmt = _hmt || [];
  (function () {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?c923daf3182a4b0ce01878475080aadc";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  title>ğŸ‰ æŸäººç”Ÿæ—¥å¿«ä¹ 
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    margin: 0;
    overflow: hidden;
    background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
    font-family: 'Noto Sans SC', sans-serif;
    position: relative;
  }

  /* æ·»åŠ æ˜Ÿç©ºèƒŒæ™¯ */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: 
      radial-gradient(2px 2px at 20px 30px, #eee, transparent),
      radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
      radial-gradient(1px 1px at 90px 40px, #fff, transparent),
      radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.6), transparent),
      radial-gradient(2px 2px at 160px 30px, #ddd, transparent);
    background-repeat: repeat;
    background-size: 200px 100px;
    animation: sparkle 3s linear infinite;
    z-index: -1;
  }

  @keyframes sparkle {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.8; }
  }

  canvas {
    position: absolute;
    z-index: 1;
  }

  /* æ·»åŠ æ§åˆ¶é¢æ¿ */
  .controls {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 1000;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    padding: 15px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  }

  .control-btn {
    background: linear-gradient(45deg, #ff6b6b, #ee5a24);
    border: none;
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    cursor: pointer;
    font-size: 12px;
    margin: 2px;
    transition: all 0.3s ease;
    font-family: 'Noto Sans SC', sans-serif;
  }

  .control-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
  }

  /* æ·»åŠ ç¥ç¦è¯­æ˜¾ç¤º */
  .blessing {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1000;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 15px 25px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    color: white;
    text-align: center;
    font-size: 14px;
    animation: float 3s ease-in-out infinite;
  }

  @keyframes float {
    0%, 100% { transform: translateX(-50%) translateY(0px); }
    50% { transform: translateX(-50%) translateY(-10px); }
  }

  /* æ·»åŠ ç²’å­æ•ˆæœå®¹å™¨ */
  .particles {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0;
  }

  /* å“åº”å¼è®¾è®¡ */
  @media (max-width: 768px) {
    .controls {
      top: 10px;
      right: 10px;
      padding: 10px;
    }
    
    .control-btn {
      padding: 6px 12px;
      font-size: 11px;
    }
    
    .blessing {
      bottom: 20px;
      padding: 12px 20px;
      font-size: 12px;
    }
  }
</style>

<body>
  <!-- æ§åˆ¶é¢æ¿ -->
  <div class="controls">
    <button class="control-btn" onclick="toggleMusic()">ğŸµ éŸ³ä¹</button>
    <button class="control-btn" onclick="changeSpeed()">âš¡ é€Ÿåº¦</button>
    <button class="control-btn" onclick="changeColor()">ğŸ¨ é¢œè‰²</button>
    <button class="control-btn" onclick="fullscreen()">ğŸ” å…¨å±</button>
  </div>

  <!-- ç¥ç¦è¯­ -->
  <div class="blessing">
    <div>ğŸ‚ æ„¿ä½ èº«ä½“å¥åº·ï¼Œæ´»åŠ›æ»¡æ»¡ï¼Œå¹¸ç¦å¸¸ä¼´ï¼ğŸ‚</div>
    <div style="font-size: 12px; margin-top: 5px; opacity: 0.8;">ç‚¹å‡»å³ä¸Šè§’æŒ‰é’®ä½“éªŒæ›´å¤šæ•ˆæœ</div>
  </div>

  <!-- ç²’å­æ•ˆæœå®¹å™¨ -->
  <div class="particles" id="particles"></div>

  <canvas></canvas>
  <canvas></canvas>
  <canvas></canvas>

  <script>
    // å…¨å±€å˜é‡
    let animationSpeed = 1;
    let colorMode = 0;
    let musicPlaying = true;
    let particleSystem = null;

    // æ§åˆ¶å‡½æ•°
    function toggleMusic() {
      const audio = document.querySelector('audio');
      if (audio) {
        if (musicPlaying) {
          audio.pause();
          musicPlaying = false;
        } else {
          audio.play();
          musicPlaying = true;
        }
      }
    }

    function changeSpeed() {
      animationSpeed = animationSpeed === 1 ? 2 : animationSpeed === 2 ? 0.5 : 1;
      document.querySelector('.controls .control-btn:nth-child(2)').textContent = 
        `âš¡ é€Ÿåº¦ ${animationSpeed}x`;
    }

    function changeColor() {
      colorMode = (colorMode + 1) % 3;
      const colors = ['ğŸŒˆ å½©è™¹', 'ğŸ”¥ ç«ç„°', 'ğŸ’ å®çŸ³'];
      document.querySelector('.controls .control-btn:nth-child(3)').textContent = colors[colorMode];
    }

    function fullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
      } else {
        document.exitFullscreen();
      }
    }

    function GetRequest() {
      var url = decodeURI(location.search);
      var theRequest = new Object();
      if (url.indexOf("?") != -1) {
        var str = url.substr(1);
        strs = str.split("&");
        for (var i = 0; i < strs.length; i++) {
          theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
        }
      }
      return theRequest;
    }

    // ç²’å­ç³»ç»Ÿç±»
    class Particle {
      constructor(x, y) {
        this.x = x;
        this.y = y;
        this.vx = (Math.random() - 0.5) * 2;
        this.vy = (Math.random() - 0.5) * 2;
        this.life = 1;
        this.decay = Math.random() * 0.02 + 0.005;
        this.size = Math.random() * 3 + 1;
        this.color = `hsl(${Math.random() * 60 + 200}, 70%, 60%)`;
      }

      update() {
        this.x += this.vx;
        this.y += this.vy;
        this.life -= this.decay;
        this.vy += 0.01;
      }

      draw(ctx) {
        ctx.save();
        ctx.globalAlpha = this.life;
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
      }
    }

    // ç²’å­ç³»ç»Ÿ
    class ParticleSystem {
      constructor() {
        this.particles = [];
        this.canvas = document.createElement('canvas');
        this.ctx = this.canvas.getContext('2d');
        this.canvas.style.position = 'fixed';
        this.canvas.style.top = '0';
        this.canvas.style.left = '0';
        this.canvas.style.pointerEvents = 'none';
        this.canvas.style.zIndex = '0';
        document.body.appendChild(this.canvas);
        this.resize();
      }

      resize() {
        this.canvas.width = window.innerWidth;
        this.canvas.height = window.innerHeight;
      }

      addParticle(x, y) {
        this.particles.push(new Particle(x, y));
      }

      update() {
        for (let i = this.particles.length - 1; i >= 0; i--) {
          const particle = this.particles[i];
          particle.update();
          if (particle.life <= 0) {
            this.particles.splice(i, 1);
          }
        }
      }

      draw() {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        this.particles.forEach(particle => particle.draw(this.ctx));
      }
    }
    class Shard {
      constructor(x, y, hue) {
        this.x = x;
        this.y = y;
        this.hue = hue;
        this.lightness = 50;
        this.size = 15 + Math.random() * 10;
        const angle = Math.random() * 2 * Math.PI;
        const blastSpeed = 1 + Math.random() * 6;
        this.xSpeed = Math.cos(angle) * blastSpeed;
        this.ySpeed = Math.sin(angle) * blastSpeed;
        this.target = getTarget();
        this.ttl = 60;
        this.timer = 0;
        this.sparkle = Math.random() * 0.1;
      }
      
      getColor() {
        switch(colorMode) {
          case 0: // å½©è™¹æ¨¡å¼
            return `hsl(${(this.hue + Date.now() * 0.1) % 360}, 100%, ${this.lightness}%)`;
          case 1: // ç«ç„°æ¨¡å¼
            return `hsl(${Math.random() * 60 + 10}, 100%, ${this.lightness}%)`;
          case 2: // å®çŸ³æ¨¡å¼
            return `hsl(${Math.random() * 60 + 200}, 100%, ${this.lightness}%)`;
          default:
            return `hsl(${this.hue}, 100%, ${this.lightness}%)`;
        }
      }
      
      draw() {
        ctx2.save();
        ctx2.shadowColor = this.getColor();
        ctx2.shadowBlur = 10;
        ctx2.fillStyle = this.getColor();
        ctx2.beginPath();
        ctx2.arc(this.x, this.y, this.size, 0, 2 * Math.PI);
        ctx2.closePath();
        ctx2.fill();
        ctx2.restore();
      }
      update() {
        if (this.target) {
          const dx = this.target.x - this.x;
          const dy = this.target.y - this.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          const a = Math.atan2(dy, dx);
          const tx = Math.cos(a) * 5;
          const ty = Math.sin(a) * 5;
          this.size = lerp(this.size, 1.5, 0.1);

          if (dist < 5) {
            this.lightness = lerp(this.lightness, 100, 0.05);
            this.xSpeed = this.ySpeed = 0;
            this.x = lerp(this.x, this.target.x + fidelity / 2, 0.1);
            this.y = lerp(this.y, this.target.y + fidelity / 2, 0.1);
            this.timer += 1;
          } else
            if (dist < 10) {
              this.lightness = lerp(this.lightness, 100, 0.05);
              this.xSpeed = lerp(this.xSpeed, tx, 0.2);
              this.ySpeed = lerp(this.ySpeed, ty, 0.2);
              this.timer += 1;
            } else {
              this.xSpeed = lerp(this.xSpeed, tx, 0.05);
              this.ySpeed = lerp(this.ySpeed, ty, 0.05);
            }
        } else {
          this.ySpeed += 0.05;
          //this.xSpeed = lerp(this.xSpeed, 0, 0.1);
          this.size = lerp(this.size, 1, 0.05);

          if (this.y > c2.height) {
            shards.forEach((shard, idx) => {
              if (shard === this) {
                shards.splice(idx, 1);
              }
            });
          }
        }
        this.x = this.x + this.xSpeed;
        this.y = this.y + this.ySpeed;
      }
    }


    class Rocket {
      constructor() {
        const quarterW = c2.width / 4;
        this.x = quarterW + Math.random() * (c2.width - quarterW);
        this.y = c2.height - 15;
        this.angle = Math.random() * Math.PI / 4 - Math.PI / 6;
        this.blastSpeed = 6 + Math.random() * 7;
        this.shardCount = 15 + Math.floor(Math.random() * 15);
        this.xSpeed = Math.sin(this.angle) * this.blastSpeed;
        this.ySpeed = -Math.cos(this.angle) * this.blastSpeed;
        this.hue = Math.floor(Math.random() * 360);
        this.trail = [];
        this.trailLength = 10;
      }
      
      getColor() {
        switch(colorMode) {
          case 0: // å½©è™¹æ¨¡å¼
            return `hsl(${(this.hue + Date.now() * 0.1) % 360}, 100%, 50%)`;
          case 1: // ç«ç„°æ¨¡å¼
            return `hsl(${Math.random() * 60 + 10}, 100%, 50%)`;
          case 2: // å®çŸ³æ¨¡å¼
            return `hsl(${Math.random() * 60 + 200}, 100%, 50%)`;
          default:
            return `hsl(${this.hue}, 100%, 50%)`;
        }
      }
      
      draw() {
        // ç»˜åˆ¶å°¾è¿¹
        ctx2.save();
        for (let i = 0; i < this.trail.length; i++) {
          const point = this.trail[i];
          const alpha = (i / this.trail.length) * 0.5;
          ctx2.globalAlpha = alpha;
          ctx2.fillStyle = this.getColor();
          ctx2.beginPath();
          ctx2.arc(point.x, point.y, 3 - i * 0.2, 0, 2 * Math.PI);
          ctx2.fill();
        }
        ctx2.restore();
        
        // ç»˜åˆ¶ç«ç®­
        ctx2.save();
        ctx2.translate(this.x, this.y);
        ctx2.rotate(Math.atan2(this.ySpeed, this.xSpeed) + Math.PI / 2);
        ctx2.shadowColor = this.getColor();
        ctx2.shadowBlur = 15;
        ctx2.fillStyle = this.getColor();
        ctx2.fillRect(0, 0, 5, 15);
        ctx2.restore();
      }
      
      update() {
        // æ›´æ–°å°¾è¿¹
        this.trail.unshift({x: this.x, y: this.y});
        if (this.trail.length > this.trailLength) {
          this.trail.pop();
        }
        
        this.x = this.x + this.xSpeed * animationSpeed;
        this.y = this.y + this.ySpeed * animationSpeed;
        this.ySpeed += 0.1 * animationSpeed;
      }

      explode() {
        for (let i = 0; i < 100; i++) {
          shards.push(new Shard(this.x, this.y, this.hue));
        }
        // æ·»åŠ ç²’å­æ•ˆæœ
        if (particleSystem) {
          for (let i = 0; i < 30; i++) {
            particleSystem.addParticle(this.x, this.y);
          }
        }
      }
    }

    console.log(GetRequest('val').val)
    
    // INITIALIZATION
    const [c1, c2, c3] = document.querySelectorAll('canvas');
    const [ctx1, ctx2, ctx3] = [c1, c2, c3].map(c => c.getContext('2d'));
    let fontSize = 200;
    const rockets = [];
    const shards = [];
    const targets = [];
    const fidelity = 3;
    let counter = 0;
    
    // åˆå§‹åŒ–ç²’å­ç³»ç»Ÿ
    particleSystem = new ParticleSystem();
    
    function resizeCanvas() {
      c2.width = c3.width = window.innerWidth;
      c2.height = c3.height = window.innerHeight;
      if (particleSystem) {
        particleSystem.resize();
      }
    }
    
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);
    
    ctx1.fillStyle = '#000';
    const text = 'â¤æŸäººç”Ÿæ—¥å¿«ä¹â¤'
    let textWidth = 99999999;

    while (textWidth > window.innerWidth) {
      ctx1.font = `900 ${fontSize--}px "Noto Sans SC", Arial, sans-serif`;
      textWidth = ctx1.measureText(text).width;
    }

    c1.width = textWidth;
    c1.height = fontSize * 1.5;
    ctx1.font = `900 ${fontSize}px "Noto Sans SC", Arial, sans-serif`;
    ctx1.fillText(text, 0, fontSize);
    const imgData = ctx1.getImageData(0, 0, c1.width, c1.height);
    for (let i = 0, max = imgData.data.length; i < max; i += 4) {
      const alpha = imgData.data[i + 3];
      const x = Math.floor(i / 4) % imgData.width;
      const y = Math.floor(i / 4 / imgData.width);

      if (alpha && x % fidelity === 0 && y % fidelity === 0) {
        targets.push({ x, y });
      }
    }

    ctx3.fillStyle = '#FFF';
    ctx3.shadowColor = '#FFF';
    ctx3.shadowBlur = 25;
    
    // æ·»åŠ é¼ æ ‡äº¤äº’
    document.addEventListener('mousemove', (e) => {
      if (Math.random() < 0.1 && particleSystem) {
        particleSystem.addParticle(e.clientX, e.clientY);
      }
    });
    
    // æ·»åŠ ç‚¹å‡»æ•ˆæœ
    document.addEventListener('click', (e) => {
      for (let i = 0; i < 5; i++) {
        rockets.push(new Rocket());
      }
    });

    // ANIMATION LOOP
    (function loop() {
      ctx2.fillStyle = "rgba(0, 0, 0, .1)";
      ctx2.fillRect(0, 0, c2.width, c2.height);
      counter += 1;

      // æ›´æ–°ç²’å­ç³»ç»Ÿ
      if (particleSystem) {
        particleSystem.update();
        particleSystem.draw();
      }

      if (counter % Math.max(1, Math.floor(8 / animationSpeed)) === 0) {
        rockets.push(new Rocket());
      }
      
      rockets.forEach((r, i) => {
        r.draw();
        r.update();
        if (r.ySpeed > 0) {
          r.explode();
          rockets.splice(i, 1);
        }
      });

      shards.forEach((s, i) => {
        s.draw();
        s.update();

        if (s.timer >= s.ttl || s.lightness >= 99) {
          ctx3.fillRect(s.target.x, s.target.y, fidelity + 1, fidelity + 1);
          shards.splice(i, 1);
        }
      });

      requestAnimationFrame(loop);
    })();

    // HELPER FUNCTIONS
    const lerp = (a, b, t) => Math.abs(b - a) > 0.1 ? a + t * (b - a) : b;

    function getTarget() {
      if (targets.length > 0) {
        const idx = Math.floor(Math.random() * targets.length);
        let { x, y } = targets[idx];
        targets.splice(idx, 1);

        x += c2.width / 2 - textWidth / 2;
        y += c2.height / 2 - fontSize / 2;

        return { x, y };
      }
    }


  </script>
  <audio src="ç”Ÿæ—¥å¿«ä¹.MP3" autoplay="autoplay" loop="loop"></audio>
</body>

</html>
